!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";function t(){return new Error(_)}function e(){try{throw t()}catch(e){return e}}function n(t){return t.stack?t.stack.split(i):[]}function a(t,e){for(var a=n(e),r=0;r<a.length;r++){var c=a[r];s.hasOwnProperty(c)||t.push(a[r])}}function r(t,e){var n=[e.trim()];if(t)for(var r=(new Date).getTime(),c=0;c<t.length;c++){var o=t[c],s=o.timestamp,u="____________________Elapsed "+(r-s.getTime())+" ms; At: "+s;u=u.replace(/[^\w\d]/g,"_"),n.push(d.replace(f,u)),a(n,o.error),r=s.getTime()}return n.join(i)}function c(t,e){e>0&&(t.push(n((new l).error)),c(t,e-1))}function o(){var t=[];c(t,2);for(var e=t[0],n=t[1],a=0;a<e.length;a++){var r=e[a],o=n[a];if(d||r.indexOf(_)!=-1||(d=r.replace(/^(\s*(at)?\s*)([\w\/\<]+)/,"$1"+f)),r!==o)break;s[r]=!0,console.log(">>>>>>",d,r)}d||(d=f+"@[native code]")}var i="\n",s={},u="__creationTrace__",_="STACKTRACE TRACKING",f="__SEP_TAG__",d="",l=function(){function t(){this.error=g(),this.timestamp=new Date}return t}(),k=t(),h=e(),g=k.stack?t:h.stack?e:t;Zone.longStackTraceZoneSpec={name:"long-stack-trace",longStackTraceLimit:10,getLongStackTrace:function(t){if(t){var e=t[Zone.__symbol__("currentTask")],n=e&&e.data&&e.data[u];return n?r(n,t.stack):t.stack}},onScheduleTask:function(t,e,n,a){var r=Zone.currentTask,c=r&&r.data&&r.data[u]||[];return c=[new l].concat(c),c.length>this.longStackTraceLimit&&(c.length=this.longStackTraceLimit),a.data||(a.data={}),a.data[u]=c,t.scheduleTask(n,a)},onHandleError:function(t,e,n,a){var c=Zone.currentTask||a.task;if(a instanceof Error&&c){var o=r(c.data&&c.data[u],a.stack);try{a.stack=a.longStack=o}catch(i){}}return t.handleError(n,a)}},o()});